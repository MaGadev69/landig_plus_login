<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PackPilot</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="static/icons/favicon.ico">
    
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <span class="logo-text">PACKPILOT</span>
            </div>
            <nav class="nav">
                <div class="client-access">
                    <a href="#" class="client-access-link" id="open-login-modal">
                        <svg class="user-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor"><path d="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512H418.3c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304H178.3z"/></svg>
                        <span>Acceso Clientes</span>
                    </a>
                </div>
            </nav>
        </div>
    </header>

    <!-- Modal de Login -->
    <div class="modal-overlay" id="login-modal">
        <div class="modal-content">
            <div class="modal-header">
                <button class="modal-close" id="close-login-modal">&times;</button>
                <h2>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z"/>
                    </svg>
                    Acceso a PackPilot
                </h2>
            </div>
            <div class="modal-body">
                <form id="modal-login-form">
                    <div class="modal-form-group">
                        <label for="modal-username">Email</label>
                        <input type="email" id="modal-username" name="username" required autocomplete="username" placeholder="tu@email.com">
                    </div>
                    <div class="modal-form-group">
                        <label for="modal-password">Contraseña</label>
                        <input type="password" id="modal-password" name="password" required autocomplete="current-password" placeholder="••••••••">
                    </div>
                    <button type="submit" class="modal-submit-btn">Ingresar a mi cuenta</button>
                    <div class="modal-error" id="modal-error-message"></div>
                </form>
            </div>
            <div class="modal-footer">
                ¿Necesitas ayuda? <a href="#" style="color: #764ba2;">Contacta soporte</a>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero" id="hero">
        <div class="hero-bg">
            <canvas id="wireframe-canvas"></canvas>
        </div>
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">
                    Gestión Integral de Encomiendas.
                </h1>
                <p class="hero-subtitle">
                    Encargate de tus ventas,
                    PackPilot se encarga de tu administracion interna.
                </p>
            </div>
        </div>
        <div class="scroll-indicator">
            <span>Scroll para explorar</span>
            <div class="scroll-arrow">↓</div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats" id="stats">
        <div class="container">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Usuarios Activos</div>
                    <div class="stat-number" data-target="150000">0</div>
                    <div class="stat-suffix">K+</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Paquetes procesados</div>
                    <div class="stat-number" data-target="2500">0</div>
                    <div class="stat-suffix">+</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Países</div>
                    <div class="stat-number" data-target="1">0</div>
                    <div class="stat-suffix">+</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Satisfacción</div>
                    <div class="stat-number" data-target="99">0</div>
                    <div class="stat-suffix">%</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Description -->
    <section class="description" id="description">
        <div class="container">
            <div class="description-content">
                <h2 class="section-title">
                    <span class="highlight">Inteligencia</span> en Cada Proceso
                </h2>
                <p class="section-text">
                    PackPilot es la solución digital que revoluciona la forma en que tu local maneja las encomiendas. Diseñada especialmente para comercios que reciben y entregan paquetes de PICKit y Andreani, nuestra plataforma transforma el caos diario en un proceso organizado, eficiente y rentable.
                </p>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <div class="features-content">
                <div class="features-left">
                    <h2 class="section-title">
                        <span class="highlight">Beneficios Inmediatos</span> 
                    </h2>
                    <p class="section-subtitle">
                        <ul>    
                            <li>Reduce hasta un 80% el tiempo dedicado a buscar y organizar paquetes</li>
                            <li>Sabe exactamente qué tienes, dónde está y cuánto tiempo lleva almacenado</li>
                            <li>Elimina la frustración de no encontrar paquetes o perder información importante</li>
                            <li>Estadísticas para mejorar continuamente tu operación</li>
                        </ul>
                    </p>
                </div>
                <div class="features-right">
                    <div class="faq-container">
                        <div class="faq-item">
                            <button class="faq-question">
                                ¿Qué es PackPilot?
                                <span class="faq-icon">+</span>
                            </button>
                            <div class="faq-answer">
                                <p>Es la herramienta definitiva para tu punto de entrega. PackPilot usa la cámara de tu celular o tablet para leer las etiquetas de los paquetes, eliminando el registro manual y los errores. Controlá todo tu inventario desde un solo lugar, de forma rápida y segura.</p>
                            </div>
                        </div>

                        <div class="faq-item">
                            <button class="faq-question">
                                ¿Cómo funciona?
                                <span class="faq-icon">+</span>
                            </button>
                            <div class="faq-answer">
                                <ul>
                                    <li>1. Registrá en un segundo: Apuntá tu cámara a la etiqueta. ¡Listo! El sistema lee y carga los datos del cliente por vos.</li>
                                    <li>2. Encontrá al instante: Usá el buscador para localizar cualquier paquete por el nombre del destinatario. Sabrás dónde está y el tamaño del paquete en todo momento.</li>
                                    <li>3. Entregá con seguridad: El cliente firma la conformidad en tu pantalla. La entrega queda registrada con una firma digital como prueba irrefutable.</li>
                                </ul>
                            </div>
                        </div>

                        <div class="faq-item">
                            <button class="faq-question">
                                ¿Por qué PackPilot es mejor que un cuaderno?
                                <span class="faq-icon">+</span>
                            </button>
                            <div class="faq-answer">
                                <ul>
                                    <li>Impresiona a tus clientes con un servicio organizado.</li>
                                    <li>Encuentra cualquier paquete en segundos, no en minutos.</li>
                                    <li>Elimina errores de escritura y pérdida de papeles.</li>
                                    <li>Ve estadísticas de tu operación y mejora continuamente.</li>
                                    <li>Crece tu volumen sin aumentar el tiempo de gestión.</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <button class="faq-question">
                                ¿Es difícil de usar?
                                <span class="faq-icon">+</span>
                            </button>
                            <div class="faq-answer">
                                <p>¡Para nada! PackPilot está diseñado para ser intuitivo. Si sabes usar WhatsApp, sabes usar PackPilot. La interfaz es simple y todas las funciones importantes están a un clic de distancia.</p>
                            </div>
                        </div>
                        <div class="faq-item">
                            <button class="faq-question">
                                ¿Qué necesito para empezar?
                                <span class="faq-icon">+</span>
                            </button>
                            <div class="faq-answer">
                                <p>Solo necesitas un dispositivo con cámara (como un celular o tablet) y una conexión a internet. PackPilot funciona en cualquier navegador moderno, así que no necesitas instalar nada.</p>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <button class="faq-question">
                                ¿Cuánto cuesta?
                                <span class="faq-icon">+</span>
                            </button>
                            <div class="faq-answer">
                                <p>PackPilot ofrece un modelo de suscripción mensual. Puedes empezar con una prueba gratuita para ver si se adapta a tus necesidades. Los precios son competitivos y escalables según el volumen de paquetes que manejes.</p>
                            </div>
                        </div>
                        
                        <div class="faq-item">
                            <button class="faq-question">
                                ¿Qué soporte ofrecen?
                                <span class="faq-icon">+</span>
                            </button>
                            <div class="faq-answer">
                                <ul>
                                    <li>. Configuración inicial gratuita</li>
                                    <li>. Soporte técnico vía WhatsApp</li>
                                    <li>. Actualizaciones automáticas sin costo adicional</li>
                                </ul>
                            </div>
                        </div>  
                        
                        <div class="faq-item">
                            <button class="faq-question">
                                ¿Es seguro?
                                <span class="faq-icon">+</span>
                            </button>
                            <div class="faq-answer">
                                <p>Absolutamente. Manejamos la información con estándares de seguridad de alto nivel. Solo almacenamos lo necesario para la gestión y nunca compartimos datos personales de tus clientes.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Final CTA -->
    <section class="final-cta" id="cta">
        <div class="cta-bg">
            <div class="radial-lines"></div>
        </div>
        <div class="container">
            <div class="cta-content">
                <h2 class="cta-title">¡Transforma tu local hoy mismo!</h2>
                <p class="cta-text">
                    No dejes que la gestión de encomiendas limite el crecimiento de tu negocio. 
                    PackPilot te da las herramientas que necesitas para ofrecer un servicio excepcional.
                </p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <div class="logo">
                        <span class="logo-text">PACKPILOT</span>
                    </div>
                    <p>© 2025 MagaDev by Jonatan Gasquez</p>
                    <p>Building software with Zero Trust</p>
                </div>
                <div class="footer-right">
                    <div class="footer-links">
                        <a href="#hero">Inicio</a>
                        <a href="#features">Características</a>
                        <a href="#cta">Contacto</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Modal functionality
            const openModalBtn = document.getElementById('open-login-modal');
            const closeModalBtn = document.getElementById('close-login-modal');
            const modal = document.getElementById('login-modal');
            const modalForm = document.getElementById('modal-login-form');
            const modalError = document.getElementById('modal-error-message');

            // Open modal
            openModalBtn.addEventListener('click', function(e) {
                e.preventDefault();
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            });

            // Close modal
            function closeModal() {
                modal.classList.remove('active');
                document.body.style.overflow = '';
                modalError.textContent = '';
            }

            closeModalBtn.addEventListener('click', closeModal);

            // Close modal when clicking outside
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });

            // Close modal with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    closeModal();
                }
            });

            // Handle form submission
            modalForm.addEventListener('submit', async function (event) {
                event.preventDefault();
                modalError.textContent = '';

                const formData = new FormData(modalForm);

                try {
                    const response = await fetch('/auth/jwt/login', {
                        method: 'POST',
                        body: formData
                    });

                    if (response.ok) {
                        window.location.href = '/';
                    } else {
                        const errorData = await response.json();
                        let detail = errorData.detail;

                        if (detail === 'LOGIN_BAD_CREDENTIALS') {
                            modalError.textContent = 'Usuario o contraseña incorrectos.';
                        } else {
                            modalError.textContent = 'Error inesperado. Inténtalo de nuevo.';
                        }
                    }
                } catch (error) {
                    console.error('Error en el fetch:', error);
                    modalError.textContent = 'No se pudo conectar con el servidor.';
                }
            });

            // FAQ functionality (existing code)
            const faqQuestions = document.querySelectorAll('.faq-question');
            faqQuestions.forEach(question => {
                question.addEventListener('click', () => {
                    const faqItem = question.parentElement;
                    const isActive = faqItem.classList.contains('active');
                    
                    // Close all FAQ items
                    document.querySelectorAll('.faq-item').forEach(item => {
                        item.classList.remove('active');
                        item.querySelector('.faq-icon').textContent = '+';
                    });
                    
                    // Open clicked item if it wasn't active
                    if (!isActive) {
                        faqItem.classList.add('active');
                        question.querySelector('.faq-icon').textContent = '−';
                    }
                });
            });

            // Stats animation (existing code)
            const observerOptions = {
                threshold: 0.5,
                rootMargin: '0px 0px -100px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const statNumbers = entry.target.querySelectorAll('.stat-number');
                        statNumbers.forEach(stat => {
                            const target = parseInt(stat.getAttribute('data-target'));
                            animateNumber(stat, target);
                        });
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            const statsSection = document.querySelector('.stats');
            if (statsSection) {
                observer.observe(statsSection);
            }

            function animateNumber(element, target) {
                let current = 0;
                const increment = target / 100;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        current = target;
                        clearInterval(timer);
                    }
                    element.textContent = Math.floor(current);
                }, 20);
            }
        });
    </script>

</body>
</html>

